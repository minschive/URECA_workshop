<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>LG U+ URECA</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand" href="/index.html">URECA</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2"><a class="nav-link" href="/index.html">Samsung</a></li>
        <li class="nav-item mx-2"><a class="nav-link" href="/apple.html">Apple</a></li>
        <li class="nav-item mx-2"><a class="nav-link" href="/lg.html">LG</a></li>
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item d-flex align-items-center">
          <a class="nav-link" href="/signup.html" id="linkSignup">회원가입</a>
          <a class="nav-link ms-3" href="/login.html" id="linkLogin">로그인</a>
          <span class="nav-link ms-3" id="userNameWrapper"><span id="userName"></span> 님</span>
          <a class="nav-link ms-3" href="#" id="linkLogout">로그아웃</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container mt-3">
  <div class="d-flex justify-content-between align-items-center">
    <h4 class="mt-3 mb-5">LG</h4>
    <div class="input-group" style="max-width: 300px;">
      <input id="inputSearchWord" type="text" class="form-control" placeholder="검색어">
      <button id="btnSearchWord" class="btn btn-primary" type="button">검색</button>
    </div>
  </div>

  <table class="table table-hover">
    <thead>
    <tr>
      <th>번호</th>
      <th>모델</th>
      <th>크기 (Main Display)</th>
      <th>메모리 (GB)</th>
      <th>가격</th>
    </tr>
    </thead>
    <tbody id="phoneTbody">
    </tbody>
  </table>
</div>

<script src="/assets/js/common.js"></script>
<script>
  let LIST_ROW_COUNT = 10; // limit 해당 변수
  let OFFSET = 0; // offset
  let SEARCH_WORD = ''; // searchWord
  let TOTAL_LIST_COUNT = 0; // 조회된 건수

  window.onload = function() {
    initUI();
    document.querySelector("#linkLogout").onclick = logout;

    // 글 목록
    listLg();

    // 검색어 처리
    document.querySelector("#btnSearchWord").onclick = function() {
      SEARCH_WORD = document.querySelector("#inputSearchWord").value;
      listSamsung();
    }
  }

  async function listLg() {
    let url = "/lg/list";
    let urlParams = "?limit=" + LIST_ROW_COUNT + "&offset=" + OFFSET + "&searchWord=" + SEARCH_WORD;
    let response = await fetch(url + urlParams);
    let data = await response.json();

    console.log(data);  // 응답 데이터 확인

    if (Array.isArray(data)) {
      makeListHtml(data);
      TOTAL_LIST_COUNT = data.length;
    } else {
      console.error("서버 응답 실패:", data);
    }
  }

  function makeListHtml(list) {
    let listHTML = ``;

    list.forEach(el => {
      let id = el.id;
      let model = el.model;
      let size = el.size;
      let memory = el.memory;
      let price = el.price;

      listHTML += `<tr style="cursor:pointer" data-id="${id}">
                            <td>${id}</td>
                            <td>${model}</td>
                            <td>${size}</td>
                            <td>${memory}</td>
                            <td>${price}</td>
                        </tr>`;
    });

    document.querySelector("#phoneTbody").innerHTML = listHTML;

    document.querySelectorAll("#phoneTbody tr").forEach(el => {
      el.onclick = function() {
        let id = this.getAttribute("data-id");
        detailLg(id);
      };
    });
  }

  async function detailLg(id) {

  }
</script>

</body>
</html>
